<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Digital Bloom">
    <meta name="description" content="Interactive physics-based generative art playground with 7 creative modes">
    <title>Digital Bloom - Physics Playground</title>

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/svg+xml" href="/icon-192.svg">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">

    <link rel="stylesheet" href="/src/style.css">
</head>
<body class="bg-black text-white overflow-hidden m-0 p-0">

    <div id="app-container" class="relative w-screen h-screen">
        <canvas id="artCanvas"></canvas>

        <!-- Intro Screen -->
        <div id="introOverlay" class="absolute inset-0 bg-black/80 backdrop-blur-md flex flex-col justify-center items-center z-20 transition-opacity duration-500">
            <h1 class="text-5xl md:text-6xl font-bold tracking-tight">Digital Bloom</h1>
            <p class="text-lg md:text-xl text-gray-400 mt-2 mb-8">An interactive generative art experience</p>
            <button id="startButton" class="group bg-white text-black font-bold text-lg w-40 h-14 rounded-full hover:bg-gray-200 transition-all transform hover:scale-105 relative overflow-hidden">
                <div class="absolute inset-0 flex justify-center items-center opacity-100 group-hover:opacity-0 transition-opacity duration-300">
                    <span class="font-mono text-lg tracking-widest">- dot -</span>
                </div>
                <span class="absolute inset-0 flex justify-center items-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">Begin</span>
            </button>
        </div>

        <!-- Top Toolbar - Mode Selector -->
        <div id="toolbar-container" class="fixed top-0 left-0 right-0 z-10 pointer-events-none">
            <div id="modeSelector" class="w-full overflow-x-auto pointer-events-auto px-2 sm:px-4">
                <div class="flex items-center justify-start sm:justify-center gap-1 p-1 bg-black/50 backdrop-blur-md border border-white/10 w-max min-w-min mx-auto rounded-full">
                    <button class="mode-button active" data-mode="vine">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 20s1-6 6-6 6 6 6 6"/></svg>
                        <span class="text-label">Vine</span>
                    </button>
                    <button class="mode-button" data-mode="gravity">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 6v12m-4-4l4 4 4-4"/></svg>
                        <span class="text-label">Gravity</span>
                    </button>
                    <button class="mode-button" data-mode="bounce">
                         <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 16c3.2-3.2 6.8-3.2 10 0s6.8 3.2 10 0"/></svg>
                        <span class="text-label">Bounce</span>
                    </button>
                    <button class="mode-button" data-mode="burst">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v2m0 10v2M5 12h2m10 0h2M7.05 7.05l1.414 1.414m8.486 8.486l1.414 1.414M7.05 16.95l1.414-1.414m8.486-8.486l1.414-1.414"/></svg>
                        <span class="text-label">Burst</span>
                    </button>
                    <button class="mode-button" data-mode="lightning">
                         <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 14l4-10 4 12 4-10"/></svg>
                        <span class="text-label">Lightning</span>
                    </button>
                    <button class="mode-button" data-mode="constellation">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 4l1.5 3 3 1.5-3 1.5L8 14l-1.5-3-3-1.5 3-1.5L8 4zM16 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2z"/></svg>
                        <span class="text-label">Stars</span>
                    </button>
                     <button class="mode-button" data-mode="vortex">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12c0-2.21 1.79-4 4-4s4 1.79 4 4-1.79 4-4 4-4-1.79-4-4zm0 0c0 2.21-1.79 4-4 4s-4-1.79-4-4 1.79-4 4-4 4 1.79 4 4z"/></svg>
                        <span class="text-label">Vortex</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings Cog (Shows after intro) -->
        <button id="settingsCog" class="fixed z-50 control-button p-2.5 rounded-full opacity-0 transition-all duration-300" title="Settings">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                <circle cx="12" cy="12" r="3"/>
                <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
            </svg>
        </button>

        <!-- Bottom Control Bar (Collapsible) -->
        <div id="bottomBar" class="fixed bottom-0 left-0 right-0 z-40 bg-black/70 backdrop-blur-md border-t border-white/10 transition-all duration-300 collapsed">
            <div class="max-w-md mx-auto" style="padding: 0.75rem 1rem env(safe-area-inset-bottom, 0px) 1rem;">
                <div class="flex items-center justify-center gap-3">
                    <button id="zenButton" class="control-button p-3 rounded-full flex-1" title="Zen Mode">
                        <span class="text-2xl">‚ùÄ</span>
                    </button>
                    <div class="flex items-center gap-1 control-button p-1 rounded-full">
                        <button id="decreaseBrush" class="w-10 h-10 rounded-full text-xl font-bold">-</button>
                        <span id="brushSize" class="w-8 text-center font-bold text-lg">4</span>
                        <button id="increaseBrush" class="w-10 h-10 rounded-full text-xl font-bold">+</button>
                    </div>
                    <button id="clearButton" class="control-button p-3 rounded-full flex-1 flex items-center justify-center" title="Clear Canvas">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                            <path d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"/>
                            <path d="M22 21H7"/>
                            <path d="m5 11 9 9"/>
                        </svg>
                    </button>
                    <button id="muteButton" class="control-button p-3 rounded-full flex-1 flex items-center justify-center" title="Toggle Sound">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                            <path d="M11 5L6 9H2v6h4l5 4V5zM22 9l-6 6m0-6l6 6"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div id="physicsIndicator" class="physics-indicator"></div>

        <!-- Audio initialization feedback -->
        <div id="audioFeedback" class="fixed top-20 left-1/2 -translate-x-1/2 z-50 bg-cyan-500/90 text-black px-4 py-2 rounded-full text-sm font-medium opacity-0 pointer-events-none transition-opacity duration-300">
            üîä Audio ready
        </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
</body>
</html>